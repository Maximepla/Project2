---
interface Product {
  src: string;
  alt: string;
  name: string;
}

interface Category {
  name: string;
  key: string;
  icon: string;
  products: Product[];
}

// Example data. Ensure this matches in both Astro and JS.
const categories: Category[] = [
  {
    name: "Nos Pains",
    key: "pains",
    icon: "/icons/baguette.svg",
    products: [
      { src: "/images/pain1.jpg", alt: "Pain de campagne", name: "Pain de campagne" },
      { src: "/images/pain2.jpg", alt: "Baguette tradition", name: "Baguette tradition" },
      { src: "/images/pain3.jpg", alt: "Pain complet", name: "Pain complet" },
      { src: "/images/pain4.jpg", alt: "Pain multicéréales", name: "Pain multicéréales" }
    ]
  },
  {
    name: "Nos Viennoiseries",
    key: "viennoiseries",
    icon: "/icons/croissant.svg",
    products: [
      { src: "/images/viennoiserie1.jpg", alt: "Croissant beurre", name: "Croissant beurre" },
      { src: "/images/viennoiserie2.jpg", alt: "Pain au chocolat", name: "Pain au chocolat" },
      { src: "/images/viennoiserie3.jpg", alt: "Brioche", name: "Brioche" }
    ]
  },
  {
    name: "Nos Pâtisseries",
    key: "patisseries",
    icon: "/icons/cake.svg",
    products: [
      { src: "/images/patisserie1.jpg", alt: "Beignet", name: "Tarte aux fraises" },
      { src: "/images/patisserie2.jpg", alt: "Gâteau d'anniversaire", name: "Éclair au chocolat" },
      { src: "/images/patisserie3.jpg", alt: "Mille-feuille", name: "Mille-feuille" }
    ]
  }
];

let selectedCategoryKey = "patisseries";
---
<section class="products-section bg-[#fdfaf5] py-16 px-4">
  <div class="max-w-7xl mx-auto">
    <h2 class="text-3xl font-serif font-bold text-[#5e4b42] mb-4 text-center">Nos Produits</h2>
    <div class="w-16 h-1 bg-teal-500 mx-auto mb-8"></div>

    <!-- Category Tabs -->
    <div class="flex items-center justify-center space-x-8 mb-10">
      {categories.map((cat, index) => (
        <div
          class={`category-tab flex flex-col items-center cursor-pointer hover:opacity-80 transition-opacity ${
            selectedCategoryKey === cat.key ? "opacity-100" : "opacity-60"
          }`}
          data-key={cat.key}
          data-index={index}
          role="button"
          tabindex="0"
          aria-selected={selectedCategoryKey === cat.key ? "true" : "false"}
        >
          <img src={cat.icon} alt={cat.name} class="w-16 h-16 mb-2" />
          <p class="text-[#5e4b42] text-sm font-medium uppercase">{cat.name}</p>
        </div>
      ))}
    </div>

    <div class="border-t border-dotted border-[#8B5E34] w-1/3 mx-auto mb-10"></div>

    <!-- Products Grid -->
    <div class="products-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-10"></div>
  </div>
</section>

<!-- Include the JavaScript file -->
<script src="/scripts/updateStuff.js" type="module" defer></script>
